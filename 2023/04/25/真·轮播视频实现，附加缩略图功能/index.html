<!DOCTYPE html><html lang="[&quot;zh-cn&quot;,&quot;en&quot;,&quot;default&quot;]" theme-mode="dark"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>真·轮播视频实现，附加缩略图功能 | Dr.Lzw</title><script>var config = {"root":"/","search":{"preload":true,"activeHolder":"键入以继续","blurHolder":"数据检索","noResult":"无 $0 相关数据"},"code":{"codeInfo":"$0 - 共 $1 行","copy":"复制","copyFinish":"复制成功","expand":"展开"}}</script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><script src="//unpkg.com/mermaid@9.2.2/dist/mermaid.min.js"></script><link rel="stylesheet" href="/css/arknights.css"><script>if (window.localStorage.getItem('theme-mode') === 'light') document.documentElement.setAttribute('theme-mode', 'light')
if (window.localStorage.getItem('theme-mode') === 'dark') document.documentElement.setAttribute('theme-mode', 'dark')</script><style>@font-face {
 font-family: BenderLight;
 src: local('Bender'), url("/font/BenderLight.ttf");
}
@font-face {
 font-family: 'JetBrains Mono';
 src: local('JetBrains Mono'), url('/font/JetBrainsMono-Regular.woff2') format('woff2');
}</style><meta name="generator" content="Hexo 5.4.2"></head><body><div class="loading" style="opacity: 0"><div class="loadingBar left"></div><div class="loadingBar right"></div></div><main><header class="closed"><nav><div class="navBtn hide"><i class="navBtnIcon"><span class="navBtnIconBar"></span><span class="navBtnIconBar"></span><span class="navBtnIconBar"></span></i></div><div class="navItem" id="search-header"><span class="navItemTitle"><input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="数据检索" spellcheck="false" maxlength="50" type="text" id="search-input"></span></div><div class="navItem" id="search-holder"></div><div class="search-popup"><div id="search-result"></div></div><ol class="navContent"><li class="navItem"><a class="navBlock" href="/"><span class="navItemTitle">Home</span></a></li><li class="navItem" matchdata="categories,tags"><a class="navBlock" href="/archives/"><span class="navItemTitle">Archives</span></a></li></ol></nav></header><article><div id="post-bg"><div id="post-title"><h1>真·轮播视频实现，附加缩略图功能</h1><div id="post-info"><span>文章发布时间: <div class="control"><time datetime="2023-04-25T04:51:41.000Z" id="date"> 2023-04-25</time></div></span><br><span>最后更新时间: <div class="control"><time datetime="2023-05-05T01:02:38.403Z" id="updated"> 2023-05-05</time></div></span></div></div><hr><div id="post-content"><h2 id="轮播视频的概念极其适用场景和实现方法"><a href="#轮播视频的概念极其适用场景和实现方法" class="headerlink" title="轮播视频的概念极其适用场景和实现方法"></a><strong>轮播视频的概念极其适用场景和实现方法</strong></h2><h3 id="你真的需要轮播视频吗"><a href="#你真的需要轮播视频吗" class="headerlink" title="你真的需要轮播视频吗 "></a>你真的需要轮播视频吗 <img src="/react/img/1.webp" style="width:200px;height:130px"></h3><span id="more"></span>

<hr>
<p><img src="/react/img/2.jpg" alt="图"></p>
<p><strong>不懂了吧</strong> 网上的轮播视频粗略看一圈下来，基本都是把轮播图的img图片位置换成了video视频，这种时间一到就直接下一张的轮播并不符合我们的需求<br>我们需要的是可以获取到视频播放长度，在视频彻底播放完之后才轮播到下一个视频的真轮播视频。这个时候就需要用到我们深厚且扎实的js功底，以我自己的轮播视频为例，先简单写一下基础的HTML和css布局  </p>
<h3 id="以下是HTML的部分"><a href="#以下是HTML的部分" class="headerlink" title="以下是HTML的部分"></a>以下是HTML的部分</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!doctype <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span></span><br><span class="hljs-tag">          <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>轮播视频<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;banner.css&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-comment">&lt;!-- 2. banner start --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">section</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;banner&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;videos-loop&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;vp-area&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">muted</span> <span class="hljs-attr">autoplay</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">source</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;supreme.mp4&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;video/mp4&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;thumbnails&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;video-item playing&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">muted</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">source</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;supreme.mp4&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;video/mp4&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;video-item-content&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>There are birds that only land once in a lifetime.<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Do you want to know why? The time it landed was when it died.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;video-item&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">muted</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">source</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;nike.mp4&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;video/mp4&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;video-item-content&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>There are birds that only land once in a lifetime.<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Do you want to know why? The time it landed was when it died.Do you want to know why? The<br>                        time it landed was when it died.Do you want to know why? The time it landed was when it<br>                        died.Do you want to know why? The time it landed was when it died.Do you want to know why?<br>                        The time it landed was when it died.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;video-item&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">muted</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">source</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;adidas.mp4&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;video/mp4&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;video-item-content&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>There are birds that only land once in a lifetime.<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Do you want to know why? The time it landed was when it died.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span><br><span class="hljs-comment">&lt;!-- 2. banner end --&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;banner.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h3 id="以下是CSS的部分"><a href="#以下是CSS的部分" class="headerlink" title="以下是CSS的部分"></a>以下是CSS的部分</h3><p>可以按需删减　，此处的css随便写了几坨</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-comment">/*banner start*/</span><br><span class="hljs-selector-id">#banner</span> &#123;<br>    <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">100px</span>;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;<br>    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#000</span>;<br>    <span class="hljs-attribute">box-sizing</span>: border-box;<br>&#125;<br><span class="hljs-selector-id">#banner</span> <span class="hljs-selector-class">.videos-loop</span> &#123;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">1460px</span>;<br>    <span class="hljs-attribute">display</span>: flex;<br>    <span class="hljs-attribute">justify-content</span>: space-between;<br>    <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;<br>&#125;<br><span class="hljs-selector-id">#banner</span> <span class="hljs-selector-class">.videos-loop</span> <span class="hljs-selector-class">.vp-area</span> &#123;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">1100px</span>;<br>    <span class="hljs-attribute">height</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">1100px</span> * <span class="hljs-number">9</span> / <span class="hljs-number">16</span>);<br>    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#161616</span>;<br>&#125;<br><span class="hljs-selector-id">#banner</span> <span class="hljs-selector-class">.videos-loop</span> <span class="hljs-selector-class">.vp-area</span> <span class="hljs-selector-tag">video</span> &#123;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">1100px</span>;<br>    <span class="hljs-attribute">height</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">1100px</span> * <span class="hljs-number">9</span> / <span class="hljs-number">16</span>);<br>&#125;<br><span class="hljs-selector-id">#banner</span> <span class="hljs-selector-class">.videos-loop</span> <span class="hljs-selector-class">.thumbnails</span> &#123;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">100%</span> - <span class="hljs-number">1100px</span>);<br>    <span class="hljs-attribute">height</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">1100px</span> * <span class="hljs-number">9</span> / <span class="hljs-number">16</span>);<br>    <span class="hljs-attribute">overflow</span>: hidden;<br>    <span class="hljs-attribute">display</span>: flex;<br>    <span class="hljs-attribute">flex-direction</span>: column;<br>    <span class="hljs-attribute">align-items</span>: center;<br>    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#1e1e1e</span>;<br>&#125;<br><span class="hljs-selector-id">#banner</span> <span class="hljs-selector-class">.videos-loop</span> <span class="hljs-selector-class">.thumbnails</span> <span class="hljs-selector-class">.video-item</span> &#123;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">320px</span>;<br>    <span class="hljs-attribute">height</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">120px</span>);<br>    <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;<br>    <span class="hljs-attribute">display</span>: flex;<br>    <span class="hljs-attribute">transition</span>: <span class="hljs-number">0.5s</span> ease-in-out;<br>    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;<br>    <span class="hljs-attribute">cursor</span>: pointer;<br>&#125;<br><span class="hljs-selector-id">#banner</span> <span class="hljs-selector-class">.videos-loop</span> <span class="hljs-selector-class">.thumbnails</span> <span class="hljs-selector-class">.video-item</span> <span class="hljs-selector-tag">video</span> &#123;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">320px</span> * <span class="hljs-number">0.4</span>);<br>    <span class="hljs-attribute">height</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">calc</span>(<span class="hljs-number">320px</span> * <span class="hljs-number">0.4</span>) * <span class="hljs-number">9</span> / <span class="hljs-number">16</span>);<br>    <span class="hljs-attribute">object-fit</span>: cover;<br>    <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">15px</span>;<br>    <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>;<br>&#125;<br><span class="hljs-selector-id">#banner</span> <span class="hljs-selector-class">.videos-loop</span> <span class="hljs-selector-class">.thumbnails</span> <span class="hljs-selector-class">.video-item</span> <span class="hljs-selector-class">.video-item-content</span> &#123;<br>    <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">calc</span>(<span class="hljs-number">320px</span> - <span class="hljs-built_in">calc</span>(<span class="hljs-number">320px</span> * <span class="hljs-number">0.4</span>)) - <span class="hljs-number">15px</span>);<br>&#125;<br><span class="hljs-selector-id">#banner</span> <span class="hljs-selector-class">.videos-loop</span> <span class="hljs-selector-class">.thumbnails</span> <span class="hljs-selector-class">.video-item</span> <span class="hljs-selector-class">.video-item-content</span> <span class="hljs-selector-tag">h3</span> &#123;<br>    <span class="hljs-attribute">width</span>: inherit;<br>    <span class="hljs-attribute">white-space</span>: nowrap;<br>    <span class="hljs-attribute">overflow</span>: hidden;<br>    <span class="hljs-attribute">text-overflow</span>: ellipsis;<br>    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;<br>    <span class="hljs-attribute">color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.6</span>);<br>    <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">12px</span>;<br>    <span class="hljs-attribute">transition</span>: <span class="hljs-number">0.2s</span> ease-in-out;<br>&#125;<br><span class="hljs-selector-id">#banner</span> <span class="hljs-selector-class">.videos-loop</span> <span class="hljs-selector-class">.thumbnails</span> <span class="hljs-selector-class">.video-item</span> <span class="hljs-selector-class">.video-item-content</span> <span class="hljs-selector-tag">p</span> &#123;<br>    <span class="hljs-attribute">width</span>: inherit;<br>    <span class="hljs-attribute">overflow</span>: hidden;<br>    <span class="hljs-attribute">text-overflow</span>: ellipsis;<br>    <span class="hljs-attribute">display</span>: -webkit-box;<br>    -webkit-box-orient: vertical;<br>    -webkit-line-clamp: <span class="hljs-number">2</span>;<br>    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;<br>    <span class="hljs-attribute">color</span>: <span class="hljs-number">#ccc</span>;<br>    <span class="hljs-attribute">transition</span>: <span class="hljs-number">0.2s</span> ease-in-out;<br>&#125;<br><span class="hljs-selector-id">#banner</span> <span class="hljs-selector-class">.videos-loop</span> <span class="hljs-selector-class">.thumbnails</span> <span class="hljs-selector-class">.video-item</span><span class="hljs-selector-pseudo">:hover</span> &#123;<br>    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#363636</span>;<br>&#125;<br><span class="hljs-selector-id">#banner</span> <span class="hljs-selector-class">.videos-loop</span> <span class="hljs-selector-class">.thumbnails</span> <span class="hljs-selector-class">.video-item</span><span class="hljs-selector-pseudo">:hover</span> <span class="hljs-selector-class">.video-item-content</span> <span class="hljs-selector-tag">h3</span> &#123;<br>    <span class="hljs-attribute">color</span>: <span class="hljs-number">#ffffff</span>;<br>&#125;<br><span class="hljs-selector-id">#banner</span> <span class="hljs-selector-class">.videos-loop</span> <span class="hljs-selector-class">.thumbnails</span> <span class="hljs-selector-class">.video-item</span><span class="hljs-selector-pseudo">:hover</span> <span class="hljs-selector-class">.video-item-content</span> <span class="hljs-selector-tag">p</span> &#123;<br>    <span class="hljs-attribute">color</span>: <span class="hljs-number">#ccc</span>;<br>&#125;<br><span class="hljs-selector-id">#banner</span> <span class="hljs-selector-class">.videos-loop</span> <span class="hljs-selector-class">.thumbnails</span> <span class="hljs-selector-class">.video-item</span><span class="hljs-selector-class">.playing</span> &#123;<br>    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#363636</span>;<br>&#125;<br><span class="hljs-selector-id">#banner</span> <span class="hljs-selector-class">.videos-loop</span> <span class="hljs-selector-class">.thumbnails</span> <span class="hljs-selector-class">.video-item</span><span class="hljs-selector-class">.playing</span> <span class="hljs-selector-class">.video-item-content</span> <span class="hljs-selector-tag">h3</span> &#123;<br>    <span class="hljs-attribute">color</span>: <span class="hljs-number">#ffffff</span>;<br>&#125;<br><span class="hljs-selector-id">#banner</span> <span class="hljs-selector-class">.videos-loop</span> <span class="hljs-selector-class">.thumbnails</span> <span class="hljs-selector-class">.video-item</span><span class="hljs-selector-class">.playing</span> <span class="hljs-selector-class">.video-item-content</span> <span class="hljs-selector-tag">p</span> &#123;<br>    <span class="hljs-attribute">color</span>: <span class="hljs-number">#ccc</span>;<br>&#125;<br><span class="hljs-keyword">@media</span> (<span class="hljs-attribute">min-width</span>: <span class="hljs-number">992px</span>) <span class="hljs-keyword">and</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">1200px</span>) &#123;<br>    <span class="hljs-selector-id">#banner</span> <span class="hljs-selector-class">.videos-loop</span> &#123;<br>        <span class="hljs-attribute">width</span>: <span class="hljs-number">1160px</span>;<br>        <span class="hljs-attribute">display</span>: flex;<br>        <span class="hljs-attribute">justify-content</span>: space-between;<br>        <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;<br>    &#125;<br>    <span class="hljs-selector-id">#banner</span> <span class="hljs-selector-class">.videos-loop</span> <span class="hljs-selector-class">.vp-area</span> &#123;<br>        <span class="hljs-attribute">width</span>: <span class="hljs-number">800px</span>;<br>        <span class="hljs-attribute">height</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">800px</span> * <span class="hljs-number">9</span> / <span class="hljs-number">16</span>);<br>        <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#161616</span>;<br>    &#125;<br>    <span class="hljs-selector-id">#banner</span> <span class="hljs-selector-class">.videos-loop</span> <span class="hljs-selector-class">.vp-area</span> <span class="hljs-selector-tag">video</span> &#123;<br>        <span class="hljs-attribute">width</span>: <span class="hljs-number">800px</span>;<br>        <span class="hljs-attribute">height</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">800px</span> * <span class="hljs-number">9</span> / <span class="hljs-number">16</span>);<br>    &#125;<br>    <span class="hljs-selector-id">#banner</span> <span class="hljs-selector-class">.videos-loop</span> <span class="hljs-selector-class">.thumbnails</span> &#123;<br>        <span class="hljs-attribute">width</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">100%</span> - <span class="hljs-number">800px</span>);<br>        <span class="hljs-attribute">height</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">800px</span> * <span class="hljs-number">9</span> / <span class="hljs-number">16</span>);<br>        <span class="hljs-attribute">overflow</span>: hidden;<br>        <span class="hljs-attribute">display</span>: flex;<br>        <span class="hljs-attribute">flex-direction</span>: column;<br>        <span class="hljs-attribute">align-items</span>: center;<br>        <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#1e1e1e</span>;<br>    &#125;<br>&#125;<br><span class="hljs-keyword">@media</span> (<span class="hljs-attribute">min-width</span>: <span class="hljs-number">700px</span>) <span class="hljs-keyword">and</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">992px</span>) &#123;<br>    <span class="hljs-selector-id">#banner</span> <span class="hljs-selector-class">.videos-loop</span> &#123;<br>        <span class="hljs-attribute">width</span>: <span class="hljs-number">860px</span>;<br>        <span class="hljs-attribute">display</span>: flex;<br>        <span class="hljs-attribute">justify-content</span>: space-between;<br>        <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;<br>    &#125;<br>    <span class="hljs-selector-id">#banner</span> <span class="hljs-selector-class">.videos-loop</span> <span class="hljs-selector-class">.thumbnails</span> &#123;<br>        <span class="hljs-attribute">width</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">100%</span> - <span class="hljs-number">500px</span>);<br>        <span class="hljs-attribute">height</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">650px</span> * <span class="hljs-number">9</span> / <span class="hljs-number">16</span>);<br>        <span class="hljs-attribute">overflow</span>: hidden;<br>        <span class="hljs-attribute">display</span>: flex;<br>        <span class="hljs-attribute">flex-direction</span>: column;<br>        <span class="hljs-attribute">align-items</span>: center;<br>        <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#1e1e1e</span>;<br>    &#125;<br>    <span class="hljs-selector-id">#banner</span> <span class="hljs-selector-class">.videos-loop</span> <span class="hljs-selector-class">.vp-area</span> &#123;<br>        <span class="hljs-attribute">width</span>: <span class="hljs-number">500px</span>;<br>        <span class="hljs-attribute">height</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">500px</span> * <span class="hljs-number">9</span> / <span class="hljs-number">16</span>);<br>        <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#161616</span>;<br>    &#125;<br>    <span class="hljs-selector-id">#banner</span> <span class="hljs-selector-class">.videos-loop</span> <span class="hljs-selector-class">.vp-area</span> <span class="hljs-selector-tag">video</span> &#123;<br>        <span class="hljs-attribute">width</span>: <span class="hljs-number">500px</span>;<br>        <span class="hljs-attribute">height</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">500px</span> * <span class="hljs-number">9</span> / <span class="hljs-number">16</span>);<br>        <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">50px</span>;<br>    &#125;<br>&#125;<br><span class="hljs-keyword">@media</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">700px</span>) &#123;<br>    <span class="hljs-selector-id">#banner</span> <span class="hljs-selector-class">.videos-loop</span> &#123;<br>        <span class="hljs-attribute">width</span>: <span class="hljs-number">480px</span>;<br>        <span class="hljs-attribute">display</span>: flex;<br>        <span class="hljs-attribute">flex-direction</span>: column;<br>        <span class="hljs-attribute">justify-content</span>: space-between;<br>        <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;<br>    &#125;<br>    <span class="hljs-selector-id">#banner</span> <span class="hljs-selector-class">.videos-loop</span> <span class="hljs-selector-class">.vp-area</span> &#123;<br>        <span class="hljs-attribute">width</span>: <span class="hljs-number">480px</span>;<br>        <span class="hljs-attribute">height</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">500px</span> * <span class="hljs-number">9</span> / <span class="hljs-number">16</span>);<br>        <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#161616</span>;<br>    &#125;<br>    <span class="hljs-selector-id">#banner</span> <span class="hljs-selector-class">.videos-loop</span> <span class="hljs-selector-class">.vp-area</span> <span class="hljs-selector-tag">video</span> &#123;<br>        <span class="hljs-attribute">width</span>: <span class="hljs-number">480px</span>;<br>        <span class="hljs-attribute">height</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">600px</span> * <span class="hljs-number">9</span> / <span class="hljs-number">16</span>);<br>    &#125;<br>    <span class="hljs-selector-id">#banner</span> <span class="hljs-selector-class">.videos-loop</span> <span class="hljs-selector-class">.thumbnails</span> &#123;<br>        <span class="hljs-attribute">width</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">100%</span> - <span class="hljs-number">500px</span>);<br>        <span class="hljs-attribute">height</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">500px</span> * <span class="hljs-number">9</span> / <span class="hljs-number">16</span>);<br>        <span class="hljs-attribute">overflow</span>: hidden;<br>        <span class="hljs-attribute">display</span>: flex;<br>        <span class="hljs-attribute">flex-direction</span>: column;<br>        <span class="hljs-attribute">align-items</span>: center;<br>        <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#1e1e1e</span>;<br>    &#125;<br>    <span class="hljs-selector-id">#banner</span> <span class="hljs-selector-class">.videos-loop</span> <span class="hljs-selector-class">.thumbnails</span> <span class="hljs-selector-class">.video-item</span> &#123;<br>        <span class="hljs-attribute">width</span>: <span class="hljs-number">500px</span>;<br>        <span class="hljs-attribute">height</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">120px</span>);<br>        <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;<br>        <span class="hljs-attribute">display</span>: flex;<br>        <span class="hljs-attribute">transition</span>: <span class="hljs-number">0.5s</span> ease-in-out;<br>        <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;<br>        <span class="hljs-attribute">cursor</span>: pointer;<br>        <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-selector-id">#banner</span> <span class="hljs-selector-class">.videos-loop</span> <span class="hljs-selector-class">.thumbnails</span> &#123;<br>        <span class="hljs-attribute">width</span>: <span class="hljs-number">480px</span>;<br>        <span class="hljs-attribute">height</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">670px</span> * <span class="hljs-number">9</span> / <span class="hljs-number">16</span>);<br>        <span class="hljs-attribute">overflow</span>: hidden;<br>        <span class="hljs-attribute">display</span>: flex;<br>        <span class="hljs-attribute">flex-direction</span>: column;<br>        <span class="hljs-attribute">align-items</span>: center;<br>        <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#1e1e1e</span>;<br>    &#125;<br>&#125;<br><span class="hljs-comment">/*banner end*/</span><br></code></pre></td></tr></table></figure>

<p>然后，把功能拆分，先实现轮播功能，这里就不细说了，直接上内容</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> currIndex = <span class="hljs-number">0</span>;<br>   <span class="hljs-keyword">let</span> playA = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&quot;.vp-area&quot;</span>);<br>   <span class="hljs-keyword">let</span> thumb = [...<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">&quot;.thumbnails &gt; .video-item &gt; video&quot;</span>)];<br>   <span class="hljs-keyword">let</span> playTime = <span class="hljs-literal">null</span>;<br>   <span class="hljs-keyword">let</span> smWindow = <span class="hljs-literal">undefined</span>;<br><br>   <span class="hljs-comment">// 轮播视频的主视频播放区域</span><br>   <span class="hljs-keyword">const</span> bannerVideo = <span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) &#123;<br>       playA.<span class="hljs-property">children</span>[<span class="hljs-number">0</span>].<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">&quot;ended&quot;</span>,bannerVideo);<br>       <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&quot;.playing&quot;</span>).<span class="hljs-property">classList</span>.<span class="hljs-title function_">remove</span>(<span class="hljs-string">&quot;playing&quot;</span>);<br>       <span class="hljs-keyword">if</span> (event.<span class="hljs-property">type</span> != <span class="hljs-string">&quot;click&quot;</span>) currIndex = ++currIndex % thumb.<span class="hljs-property">length</span>;<br>       <span class="hljs-keyword">let</span> videoDom =<br>                <span class="hljs-string">`&lt;video muted autoplay&gt;</span><br><span class="hljs-string">                    &lt;source src=&quot;<span class="hljs-subst">$&#123;thumb[currIndex].children[<span class="hljs-number">0</span>].getAttribute(<span class="hljs-string">&quot;src&quot;</span>)&#125;</span>&quot; type=&quot;video/mp4&quot;&gt;</span><br><span class="hljs-string">                &lt;/video&gt;`</span>;<br>       playA.<span class="hljs-property">innerHTML</span>=videoDom;<br>       thumb[currIndex].<span class="hljs-property">parentElement</span>.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">&quot;playing&quot;</span>);<br>       playA.<span class="hljs-property">children</span>[<span class="hljs-number">0</span>].<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;ended&quot;</span>,bannerVideo);<br>   &#125;<br></code></pre></td></tr></table></figure>

<p>然后就是缩略图功能，当鼠标移到缩略图范围内时，主视频区的视频暂停，开始播放缩略图视频，鼠标移开缩略图时，主视频继续播放，如果点击了指定的视频，则播放指定的视频</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 缩略图</span><br>   <span class="hljs-keyword">const</span> smallVideo = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">let</span> videos = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">&quot;.video-item&quot;</span>);<br>        videos.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">el,index</span>) =&gt;</span> &#123;<br><br>            el.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;click&quot;</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> &#123;<br>                <span class="hljs-keyword">if</span> (smWindow != <span class="hljs-literal">undefined</span>) &#123;<br>                    thumb[smWindow].<span class="hljs-title function_">pause</span>();<br>                    thumb[smWindow].<span class="hljs-property">currentTime</span> = <span class="hljs-number">0</span>;<br>                    playA.<span class="hljs-property">children</span>[<span class="hljs-number">0</span>].<span class="hljs-title function_">play</span>();<br>                &#125;<br>                <span class="hljs-keyword">if</span> (currIndex == index) <span class="hljs-keyword">return</span>;<br>                currIndex = index;<br>                <span class="hljs-title function_">bannerVideo</span>(event);<br>            &#125;);<br><br>            el.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;mouseover&quot;</span>,<span class="hljs-function">() =&gt;</span> &#123;<br>                playTime = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span>&#123;<br>                    smWindow = index;<br>                    playA.<span class="hljs-property">children</span>[<span class="hljs-number">0</span>].<span class="hljs-title function_">pause</span>();<br>                    thumb[index].<span class="hljs-title function_">play</span>();<br>                &#125;,<span class="hljs-number">100</span>);<br>            &#125;);<br><br>            el.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;mouseleave&quot;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>               <span class="hljs-built_in">clearTimeout</span>(playTime);<br>               <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">()=&gt;</span>&#123;<br>                  smWindow = <span class="hljs-literal">undefined</span>;<br>                  thumb[index].<span class="hljs-title function_">pause</span>();<br>                  thumb[index].<span class="hljs-property">currentTime</span> = <span class="hljs-number">0</span>;<br>                  playA.<span class="hljs-property">children</span>[<span class="hljs-number">0</span>].<span class="hljs-title function_">play</span>();<br>               &#125;,<span class="hljs-number">100</span>);<br>            &#125;);<br><br>        &#125;);<br>   &#125;<br></code></pre></td></tr></table></figure>


<h3 id="完整的js内容如下"><a href="#完整的js内容如下" class="headerlink" title="完整的js内容如下"></a>完整的js内容如下</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><code class="hljs js">(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br><br>    <span class="hljs-keyword">let</span> currIndex = <span class="hljs-number">0</span>;<span class="hljs-comment">//当前播放着的视频索引，默认为视频列表第一个</span><br>    <span class="hljs-keyword">let</span> smWindow = <span class="hljs-literal">undefined</span>;<span class="hljs-comment">//视频列表中当前在后台播放的视频的索引</span><br>    <span class="hljs-keyword">let</span> playtime = <span class="hljs-literal">null</span>;<span class="hljs-comment">//获取setTimeout返回的句柄,方便取消setTimeout</span><br>    <span class="hljs-comment">// 扩展运算符... 可以获取剩下的所有数组参数，这里的thumb相当于绑定了缩略图的三个视频，以数组的形式储存</span><br>    <span class="hljs-keyword">let</span> thumb = [...<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">&quot;.thumbnails &gt; .video-item &gt; video&quot;</span>)];<br>    <span class="hljs-keyword">let</span> playbanner = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&quot;.vp-area&quot;</span>)<span class="hljs-comment">// 轮播视频正在播放的播放区域</span><br><br><br>    <span class="hljs-comment">// 轮播视频的播放函数</span><br>    <span class="hljs-keyword">const</span> bannerVideo = <span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) &#123;<br><br>        <span class="hljs-comment">// 触发了轮播视频的函数，就先判断视频是怎么被触发的，是视频放完了播下一个视频，还是因为缩略图被点击之后放的下一个</span><br>        <span class="hljs-comment">// 如果触发轮播函数的方式不是点击的，那就是视频放完了到下一个了，给索引先自增之后，在对视频列表的长度取余</span><br>        <span class="hljs-comment">//假设这里的索引是2，播放的是第三个视频，先自增之后就是3，3除以视频列表的长度3，3除3等于1，余数是0，</span><br>        <span class="hljs-comment">// 取余之后赋值给索引，所以索引就是0，这样播放完最后一个视频，就会重置索引到0，重新播放第一个视频</span><br>        <span class="hljs-keyword">if</span> (event.<span class="hljs-property">type</span> != <span class="hljs-string">&quot;click&quot;</span>) currIndex = ++currIndex % thumb.<span class="hljs-property">length</span>;<br>        <span class="hljs-comment">// 定义一下需要动态渲染的播放区域</span><br><br>        <span class="hljs-keyword">let</span> videoDom = <span class="hljs-string">`&lt;video muted autoplay&gt;</span><br><span class="hljs-string">&lt;!--   用插值表达式动态渲染src路径  thumb这个数组里面第currIndex个参数的第一个子元素source的视频路径--&gt;</span><br><span class="hljs-string">&lt;!--   getAttribute方法返回一个元素属性的值，这里返回的src相当于获取缩略图的的视频路径，根据缩略图的排序来划分视频播放列表--&gt;</span><br><span class="hljs-string">                &lt;source src=&quot;<span class="hljs-subst">$&#123;thumb[currIndex].children[<span class="hljs-number">0</span>].getAttribute(<span class="hljs-string">&quot;src&quot;</span>)&#125;</span>&quot; type=&quot;video/mp4&quot;&gt;</span><br><span class="hljs-string">            &lt;/video&gt;`</span><br><br>        <span class="hljs-comment">// 把这个动态渲染的html替换掉原本html里的静态内容</span><br>        playbanner.<span class="hljs-property">innerHTML</span> = videoDom;<br>        <span class="hljs-comment">// 给播放视频区域的第一个子元素，也就是主视频添加一个ended事件，当视频播放完之后，再次调用该函数</span><br>        playbanner.<span class="hljs-property">children</span>[<span class="hljs-number">0</span>].<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;ended&quot;</span>,bannerVideo);<br><br>    &#125;<br>    <span class="hljs-comment">// 缩略图</span><br>    <span class="hljs-keyword">const</span> smBannerVideo = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-comment">// 获取缩略图的类名</span><br>        <span class="hljs-keyword">let</span> videos = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">&quot;.video-item&quot;</span>);<br>        <span class="hljs-comment">// 给缩略图循环添加三个事件</span><br>        <span class="hljs-comment">// callbackfn为数组中每个元素执行的函数,并携带两个参数</span><br>        <span class="hljs-comment">// element是数组中正在处理的当前元素   index是数组中正在处理的当前元素的索引</span><br>        videos.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">el,index</span>)  =&gt;</span>&#123;<br>            el.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;click&quot;</span>,<span class="hljs-function">(<span class="hljs-params">event</span>)=&gt;</span>&#123;<br>                <span class="hljs-comment">//如果有视频列表中有视频在后台播放，则暂停并重置它，然后恢复主视频的播放</span><br>                <span class="hljs-keyword">if</span> (smWindow != <span class="hljs-literal">undefined</span>) &#123;<br>                    <span class="hljs-comment">// pause方法暂停缩略图正在放的视频</span><br>                    thumb[smWindow].<span class="hljs-title function_">pause</span>();<br>                    <span class="hljs-comment">// currentTime使视频的播放进度归零</span><br>                    thumb[smWindow].<span class="hljs-property">currentTime</span> = <span class="hljs-number">0</span>;<br>                    <span class="hljs-comment">// play方法，让主视频区域的视频继续播放</span><br>                    playbanner.<span class="hljs-property">children</span>[<span class="hljs-number">0</span>].<span class="hljs-title function_">play</span>();<br>                &#125;<br>                <span class="hljs-keyword">if</span> (currIndex == index) <span class="hljs-keyword">return</span>;<span class="hljs-comment">// 如果点击的是当前视频就退出</span><br>                currIndex = index;<span class="hljs-comment">//解决了pc端，鼠标移入视频列表区域中的视频时，点击该视频，播放区域主视频和视频列表中该视频同时播放的问题</span><br>                <span class="hljs-title function_">bannerVideo</span>(event);<br>            &#125;)<br><br>            el.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;mouseover&quot;</span>,<span class="hljs-function">()=&gt;</span>&#123;<br>                 <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span>&#123;<br>                    smWindow = index;<br>                    playbanner.<span class="hljs-property">children</span>[<span class="hljs-number">0</span>].<span class="hljs-title function_">pause</span>();<br>                    thumb[index].<span class="hljs-title function_">play</span>();<br>                &#125;,<span class="hljs-number">100</span>);<br>            &#125;)<br><br>            el.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;mouseleave&quot;</span>,<span class="hljs-function">()=&gt;</span>&#123;<br>                <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">()=&gt;</span>&#123;<br>                    thumb[index].<span class="hljs-title function_">pause</span>();<br>                    thumb[index].<span class="hljs-property">currentTime</span> = <span class="hljs-number">0</span>;<span class="hljs-comment">// 视频播放进度归0</span><br>                    playbanner.<span class="hljs-property">children</span>[<span class="hljs-number">0</span>].<span class="hljs-title function_">play</span>();<br>                &#125;,<span class="hljs-number">100</span>);<br>            &#125;)<br>        &#125;);<br>    &#125;<br><br>    <span class="hljs-keyword">const</span> run = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-comment">// 绑定第一个视频</span><br>        <span class="hljs-keyword">let</span> videoElem = playbanner.<span class="hljs-property">children</span>[<span class="hljs-number">0</span>];<br>        <span class="hljs-comment">// 给第一个视频添加事件，用ended事件，在视频播放完之后，触发轮播视频的函数</span><br>        videoElem.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;ended&quot;</span>, bannerVideo);<br>        <span class="hljs-comment">// 执行缩略图</span><br>        <span class="hljs-title function_">smBannerVideo</span>();<br>    &#125;<br>    <span class="hljs-title function_">run</span>();<br>&#125;)()<br></code></pre></td></tr></table></figure>

<h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><p>那么到此为止，一套完整的轮播视频＋缩略图就这么点了<img src="/react/img/4.jpg">　　<br>虽然细节没有说到位，但是反复看两遍源码，逻辑还是很简单的，点到为止，下播</p>
<div id="paginator"></div></div><div id="post-footer"><div id="pages"><div class="footer-link" style="width: 50%;text-align:right;border-right:1px #fe2 solid"><a href="/2023/04/25/hello-world/">← Next Hello World</a></div><div class="footer-link" style="width: 50%;right:1px;border-left:1px #fe2 solid"><a href="/2023/03/15/Js%E6%A8%A1%E6%8B%9F%E6%83%AF%E6%80%A7%E6%BB%91%E5%8A%A8%E6%8F%92%E4%BB%B6/">Js模拟惯性滑动插件 Prev →</a></div></div></div><details id="reward"><summary>打赏</summary><div><span>Wechat</span><br><img src="/img/WeChat.png"></div><div><span>Alipay</span><br><img src="/img/Alipay.png"></div></details><div id="comments"><div class="selector"><button class="valine-sel"></button></div><div id="valine"></div></div></div><div class="bottom-btn"><div><a id="to-top" onClick="scrolls.scrolltop();" title="回到顶部" style="opacity: 0; display: none;">∧</a><a id="to-index" href="#toc-div" title="文章目录">≡</a><a id="color-mode" onClick="colorMode.change()" title="切换主题"></a></div></div></article><aside><div id="about"><a href="/" id="logo"><img src="https://ak.hypergryph.com/assets/index/images/ak/pc/faction/1.png" alt="Logo"></a><h1 id="Dr"><a href="/">Dr.Lzw</a></h1><div id="description"><p></p></div></div><div id="aside-block"><div id="toc-div"><h1>目录</h1><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BD%AE%E6%92%AD%E8%A7%86%E9%A2%91%E7%9A%84%E6%A6%82%E5%BF%B5%E6%9E%81%E5%85%B6%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF%E5%92%8C%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%B3%95"><span class="toc-number">1.</span> <span class="toc-text">轮播视频的概念极其适用场景和实现方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%A0%E7%9C%9F%E7%9A%84%E9%9C%80%E8%A6%81%E8%BD%AE%E6%92%AD%E8%A7%86%E9%A2%91%E5%90%97"><span class="toc-number">1.1.</span> <span class="toc-text">你真的需要轮播视频吗 </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A5%E4%B8%8B%E6%98%AFHTML%E7%9A%84%E9%83%A8%E5%88%86"><span class="toc-number">1.2.</span> <span class="toc-text">以下是HTML的部分</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A5%E4%B8%8B%E6%98%AFCSS%E7%9A%84%E9%83%A8%E5%88%86"><span class="toc-number">1.3.</span> <span class="toc-text">以下是CSS的部分</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%8C%E6%95%B4%E7%9A%84js%E5%86%85%E5%AE%B9%E5%A6%82%E4%B8%8B"><span class="toc-number">1.4.</span> <span class="toc-text">完整的js内容如下</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93"><span class="toc-number">1.5.</span> <span class="toc-text">小结</span></a></li></ol></li></ol></div></div><footer><nobr>构建自 <a target="_blank" rel="noopener" href="http://hexo.io">Hexo</a></nobr><wbr><nobr> 使用主题 <a target="_blank" rel="noopener" href="https://github.com/Yue-plus/hexo-theme-arknights">Arknights</a></nobr><wbr><nobr>主题作者 <a target="_blank" rel="noopener" href="https://gitee.com/lzw-nb/react">Lzw66  </a></nobr></footer></aside></main><canvas id="canvas-dust"></canvas><script src="/js/search.js"></script><script class="pjax-js">reset=_=>{new Valine({
 el: '#valine'
 , appId: 'WghCZWnhex02x3oKdpIKoES9-gzGzoHsz'
 , appKey: 'Aie0UsdoEB2pnJ1jyfvqVIEd' , placeholder: '此条评论委托企鹅物流发送'
 , path: window.location.pathname
});code.findCode();}</script><script src="/js/arknights.js"></script><script src="/js/pjax.js"></script><script>window.addEventListener("load",() => {pjax = new Pjax({
 cacheBust: false,
 selectors: ['title','article','#aside-block','.pjax-js'],
 switches: {'article': Pjax.switches.sideBySide},
 switchesOptions: {
   'article': {
     classNames: {
       remove: "pjax-out",
       add: "pjax-in"
     }
   }
 }
});
document.addEventListener("pjax:complete", reset);reset()})</script></body></html>